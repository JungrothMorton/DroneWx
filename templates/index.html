{% include 'header.html' %}
    <div class="container">
      <div class="col-xs-10 col-xs-offset-1">
        <form action="briefing" method="get" id="latlong">
          <input type="hidden" name="latitude" id="latitude">
          <input type="hidden" name="longitude" id="longitude">
        </form>
        <button class="btn btn-primary" onclick="getLocation()">Use My Location</button>
        <div id="location-warning">
        </div>
      </div>
    </div><!-- /.container -->
    <script>
    var x = document.getElementById("location-warning");

    function getLocation() {
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(sendLocation,locationDenied);
        } else {
            x.innerHTML = '<div class="alert alert-danger">Geolocation is not supported by your browser. Use the search form below instead</div>';
        }
    }

    function sendLocation(position) {
      document.getElementById("latitude").value = position.coords.latitude.toFixed(3);
      document.getElementById("longitude").value = position.coords.longitude.toFixed(3);
      document.getElementById("latlong").submit();
    }

    function locationDenied() {
      x.innerHTML = '<div class="alert alert-danger">Geolocation was denied. Use the search form below.</div>';
    }
    </script>
{% include 'footer.html' %}
