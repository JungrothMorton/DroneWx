{% include 'header.html' %}
    <div class="container">
      <div class="col-xs-10 col-xs-offset-1">
        <h2 class="text-center">The low down on the down low.</h2>
        <p>DroneWx provides weather reports, nearby airports, and flight restriction information for all UAV, UAS, multicopter and RC pilots. The information provided is for information purposes only, and should <em>not</em> be used as a sole source of preflight infromation.</p>
        <form action="briefing" method="get" id="latlong">
          <input type="hidden" name="latitude" id="latitude">
          <input type="hidden" name="longitude" id="longitude">
        </form>
        <div class="text-center">
          <button class="btn btn-primary" onclick="getLocation()">Search My Location</button>
        </div>
        <div id="location-warning">
        </div>
      </div>
    </div><!-- /.container -->
    <script>
    var x = document.getElementById("location-warning");

    function getLocation() {
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(sendLocation,locationDenied);
        } else {
            x.innerHTML = '<div class="alert alert-danger">Geolocation is not supported by your browser. Use the search form below instead</div>';
        }
    }

    function sendLocation(position) {
      document.getElementById("latitude").value = position.coords.latitude.toFixed(3);
      document.getElementById("longitude").value = position.coords.longitude.toFixed(3);
      document.getElementById("latlong").submit();
    }

    function locationDenied() {
      x.innerHTML = '<div class="alert alert-danger">Geolocation was denied. Use the search form below.</div>';
    }
    </script>
{% include 'footer.html' %}
